<html ng-app="listaTelefonica">
<head>
    <meta charset="UTF-8">
    <title>Lista Telefônica</title>

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="lib/bootstrap/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="css/app.css">
    <link rel="stylesheet" type="text/css" href="css/ui.css">

    <script src="lib/angular/angular.js"></script>
    <script src="lib/angular/angular-messages.js"></script>
    <script src="lib/angular/angular-locale_pt-br.js"></script>

    <script src="js/app.js"></script>

    <!-- CONTROLLER -->
    <script src="js/controller/listaTelefonicaCtrl.js"></script>

    <!-- SERVICE -->
    <script src="js/services/contatosAPIService.js"></script>
    <script src="js/services/operadorasAPIService.js"></script>
    <script src="js/services/serialGeneratorService.js"></script>
    <script src="js/services/checkStatusAPIService.js"></script>

    <!-- CONSTANT -->
    <script src="js/constants/configValue.js"></script>

    <!-- CONFIG -->
    <script src="js/config/serialGeneratorConfig.js"></script>

    <!-- FILTER -->
    <script src="js/filters/nameFilter.js"></script>
    <script src="js/filters/ellipsisFilter.js"></script>

    <!-- DIRECTIVES -->
    <script src="js/directives/uiAlertDirective.js"></script>
    <script src="js/directives/uiDateDirective.js"></script>
    <script src="js/directives/uiTelefoneDirective.js"></script>
    <script src="js/directives/uiAccordionDirective.js"></script>
</head>

<body ng-controller="listaTelefonicaCtrl">
<div class="jumbotron">
    <div class="page-header">
        <h1>{{app}}</h1>
    </div>
    <hr class="my-4">

    <!-- por javascript ser case sensitive e css nao, ui-alert = uiAlert, ng-show = ngShow-->
    <ui-alert ng-if="apiStatus" title="Ops, aconteceu um problema!">
        {{error}}
    </ui-alert>

    <input id="search" class="form-control" type="text" ng-model="criterioDeBusca" placeholder="Quem você está buscando?"/>
    <table class="table table-striped" ng-show="contatos.length > 0">
        <tr>
            <th></th>
            <th>Serial</th>
            <th><a href="" ng-click="ordenarPor('nome')"/>Nome</th>
            <th><a href="" ng-click="ordenarPor('telefone')"/>Telefone</th>
            <th>Operadora</th>
            <th>Data</th>
            <th></th>
        </tr>
        <tr ng-class="{'selecionado negrito': contato.selecionado}" ng-repeat="contato in contatos | filter:{nome: criterioDeBusca} | orderBy:criterioDeOrdenacao:direcaoDaOrdenacao">
            <td>{{contato.serial}}</td>
            <td>
                <input type="checkbox" ng-model="contato.selecionado"/>
            </td>
            <td>{{contato.nome | name | ellipsis:10}}</td>
            <td>{{contato.telefone}}</td>
            <td>{{contato.operadora.nome | lowercase}}</td>
            <td>{{contato.data | date:'EEEE dd/MM/yyyy'}}</td>
            <td>
                <div style="width: 20px; height: 20px;" ng-style="{'background-color': contato.cor}"></div>
            </td>
        </tr>
    </table>
    <hr/>

    <form name="contatoForm">
        <input class="form-control" type="text" ng-model="contato.nome" placeholder="Nome" ng-required="true" ng-minlength="5" name="nome"/>
        <input class="form-control" type="text" ng-model="contato.telefone" placeholder="Telefone" ng-required="true" ng-minlength="14" ng-maxlength="14" name="telefone" ng-pattern="/^\(\d{2}\)\d{4,5}-\d{4}$/" ui-telefone/>
        <input class="form-control" type="text" ng-model="contato.data" name="data" placeholder="Data" ui-date/>
        <select class="form-control" ng-model="contato.operadora" ng-options="operadora.nome + '(' + (operadora.preco | currency) + ')' for operadora in operadoras | orderBy:'nome'" ng-required="true" name="operadora">
            <option value="">Selecione uma operadora</option>
        </select>
    </form>

    <!-- TELEFONE SPAN -->
    <div ng-show="contatoForm.telefone.$error.required && contatoForm.telefone.$dirty" class="alert alert-danger">
        Por favor, preencher o campo telefone.
    </div>
    <div ng-show="contatoForm.telefone.$error.minlength || contatoForm.telefone.$error.maxlength" class="alert alert-danger">
        O campo nome deve ter 14 caracteres.
    </div>
    <div ng-show="contatoForm.telefone.$error.pattern" class="alert alert-danger">
        O campo telefone deve ter o formato "(99)99999-9999".
    </div>

    <div ng-show="contatoForm.operadora.$invalid && contatoForm.operadora.$dirty" class="alert alert-danger">
        Por favor, selecionar uma operadora.
    </div>

    <!-- NOME SPAN -->
    <div ng-show="contatoForm.nome.$dirty" ng-messages="contatoForm.nome.$error">
        <div ng-message="required" class="alert alert-danger">
            Por favor, preencha o campo nome!
        </div>
        <div ng-message="minlength" class="alert alert-danger">
            O campo nome deve ter no mínimo 10 caracteres.
        </div>
    </div>

    <button class="btn btn-primary btn-block" ng-click="adicionarContato(contato)" ng-disabled="contatoForm.$invalid">Adicionar Contato</button>
    <button class="btn btn-danger btn-block" ng-click="apagarContato(contatos)" ng-if="isContatoSelecionado(contatos)">Apagar Contato</button>

    <div id="accordions">
        <h1>Accordions</h1>
        <hr class="my-4">
        <ui-accordions>
            <ui-accordion title="Accordion 1">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et sollicitudin turpis. Curabitur efficitur porta maximus. Nulla aliquet feugiat ex. Sed non eros lorem. Sed sagittis varius convallis. Curabitur mauris lectus, molestie in tortor sit amet, maximus dignissim arcu. In placerat, tellus eget aliquet rhoncus, est urna tristique dui, id cursus enim lacus at mi. Proin facilisis fermentum ipsum id varius.
            </ui-accordion>
            <ui-accordion title="Accordion 2">
                Phasellus tristique, metus accumsan elementum tempus, risus est vestibulum ligula, et vulputate tortor turpis vel enim. Nunc quis rutrum ipsum. Praesent sagittis ipsum ac suscipit volutpat. Donec est velit, vestibulum at erat et, accumsan sodales elit. Cras mollis arcu nulla, et faucibus orci sollicitudin sit amet. Sed maximus libero nec erat commodo ultrices. Nulla lacinia purus a sem tincidunt, ut varius erat placerat. Aliquam sit amet purus facilisis, tincidunt quam ut, tempus magna. Fusce tincidunt erat in venenatis efficitur. Etiam rhoncus ex sit amet nunc tincidunt, id feugiat ante dignissim. Aenean arcu libero, fringilla nec velit et, faucibus suscipit magna. Curabitur at risus at metus feugiat placerat sit amet ac mi.
            </ui-accordion>
            <ui-accordion title="Accordion 3">
                In vitae augue eget velit pellentesque vehicula ac vitae justo. Etiam lacinia, enim eget ornare facilisis, ante sapien elementum metus, et maximus metus ipsum vel urna. Donec et massa ac velit dictum congue a a magna. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Duis consectetur sapien in nisi egestas dapibus. Aliquam a varius enim, at ornare nulla. Donec eget semper turpis. Donec rhoncus dui vel ullamcorper porta. Ut vehicula id dui congue bibendum. Praesent id egestas lacus, sagittis faucibus enim. Donec pretium eu leo sit amet egestas. In hac habitasse platea dictumst. Aenean lacinia risus sit amet risus gravida, eu feugiat nibh consectetur. Nunc eleifend vehicula convallis. Etiam sed nibh sed elit ultricies mollis. In sed nibh faucibus, mollis dui et, commodo eros.
            </ui-accordion>
            <ui-accordion title="Accordion 4">
                Ut eu rhoncus est. In egestas metus eu massa fermentum finibus. Donec luctus viverra felis, nec cursus enim molestie ut. Praesent molestie sapien et varius sodales. Cras ligula nisl, semper ut velit vel, eleifend bibendum magna. Pellentesque condimentum massa felis, in aliquam sapien elementum at. Curabitur odio justo, maximus interdum interdum eu, molestie sit amet justo. Aenean sagittis at massa id mattis. Donec semper molestie sapien id vehicula.
            </ui-accordion>
            <ui-accordion title="Accordion 5">
                In et fringilla metus, vitae placerat purus. Integer sollicitudin ultricies tincidunt. Nam pulvinar eros neque, eu venenatis orci luctus at. Integer non neque mattis, interdum dolor id, tempor arcu. Etiam imperdiet urna in nibh commodo maximus sed sed massa. In vitae molestie velit, in congue tellus. Morbi nec libero vel nulla rutrum porta. Sed sagittis, ante non elementum vestibulum, lacus tortor finibus ante, vitae vulputate mauris orci a arcu. Phasellus ornare nunc nisl, at dictum arcu venenatis id. Phasellus pulvinar diam sed justo fringilla tempus. Vestibulum eget nibh blandit, vulputate justo id, venenatis justo. Vestibulum vel ipsum a ligula malesuada aliquam vel a augue. Aenean at pharetra quam. Proin tempus nisi consequat aliquet mollis. Aliquam et ornare libero. Praesent tellus nibh, interdum ac tempus pretium, lacinia ut lacus.
            </ui-accordion>
        </ui-accordions>
    </div>
</div>

<!-- são utilizadas aspas simples e duplas para que o angular não pesquise uma propriedade no $scope -->
<div ng-include="'view/footer.html'"></div>
</body>
</html>